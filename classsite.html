<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>象棋大师训练班 - Xiangqi Training</title>
    <style>
      @import url("https://unpkg.com/normalize.css") layer(normalize);

      @layer normalize, base, demo;

      @layer demo {
        body {
          background: light-dark(
            #f0f2f5,
            #000
          ); /* Slightly softer white for light mode */
          display: flex;
          align-items: center;
          justify-content: center;
          flex-direction: column;
          gap: 1rem;
          padding-block: 2rem;
        }

        h1,
        p {
          margin: 0;
        }

        h1.fluid {
          --font-size-min: 22;
          --font-level: 4.25;
          font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
          font-weight: 800;
          letter-spacing: -0.05em;
        }

        body > p {
          width: 74ch;
          max-width: calc(100% - 4rem);
          text-wrap: balance;
          margin-bottom: 4rem;
          line-height: 1.6;
          opacity: 0.8;
          font-weight: 400;
          color: light-dark(#333, #ccc);

          @media (max-width: 768px) {
            text-align: center;
          }
        }

        /* Card animations */
        li :is(svg) {
          opacity: 0.6;
          transition: opacity calc(var(--speed) * 1.2) var(--easing);
        }

        /* Hide H3 when active if you want, or keep it. 
         Here we keep H3 visible but move it or style it. 
         Actually, let's keep H3 always visible as it acts as the label. */
        li h3 {
          transition: opacity calc(var(--speed) * 1.2) var(--easing);
          color: #fff; /* Always white for contrast against image/gradient */
          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
          z-index: 10;
        }

        li :is(a, p) {
          opacity: 0;
          transition: opacity calc(var(--speed) * 1.2) var(--easing);
          width: fit-content;
        }

        li img {
          filter: grayscale(1) brightness(1.2);
          scale: 1.1;
          transition-property: filter, scale;
          transition-duration: calc(var(--speed) * 1.2);
          transition-timing-function: var(--easing);
        }

        [data-active="true"] :is(a, p, h3, svg) {
          opacity: var(--opacity, 1);
        }
        [data-active="true"] :is(a, p) {
          transition-delay: calc(var(--speed) * 0.25);
        }

        [data-active="true"] img {
          filter: grayscale(0) brightness(1);
          scale: 1;
          transition-delay: calc(var(--speed) * 0.25);
        }

        article {
          width: calc(var(--article-width) * 1px);
          height: 100%;
          position: absolute;
          top: 0;
          left: 0;
          display: flex;
          flex-direction: column;
          justify-content: flex-end;
          gap: 1rem;
          padding-inline: calc(var(--base) * 0.5 - 9px);
          padding-bottom: 2rem;
          overflow: hidden;

          /* Vertical Text Styling for Mandarin Names */
          h3 {
            position: absolute;
            top: 1.5rem;
            /* Center horizontally within the collapsed strip width (var(--base)) */
            left: calc(var(--base) * 0.5);
            transform: translateX(-50%);

            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: 0.5em; /* Space out Chinese characters */

            /* The Magic for Vertical Text */
            writing-mode: vertical-rl;
            text-orientation: upright;

            margin: 0;
            pointer-events: none;
          }

          svg {
            width: 24px;
            fill: none;
            stroke: #fff;
            z-index: 2;
          }

          p {
            font-size: 14px;
            text-wrap: balance;
            line-height: 1.4;
            --opacity: 0.9;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            max-width: 80%;
            z-index: 2;
          }

          a {
            position: absolute;
            bottom: 2rem;
            left: 50%; /* Center button roughly */
            transform: translateX(-20%); /* Slight adjustment for alignment */
            height: 24px;
            line-height: 1;
            color: #fff;
            z-index: 2;
            text-decoration: none;
            font-weight: bold;
            border-bottom: 2px solid rgba(255, 255, 255, 0.5);
            padding-bottom: 2px;

            &:is(:focus-visible, :hover) {
              outline: none;
              border-bottom-color: #fff;
            }

            span {
              font-size: 0.9rem;
            }
          }

          img {
            position: absolute;
            pointer-events: none;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Darker gradient at bottom for text readability */
            mask: linear-gradient(
              180deg,
              #fff 60%,
              rgba(255, 255, 255, 0.8) 100%
            );
          }

          /* Add a scrim for better text readability */
          &::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(
              to top,
              rgba(0, 0, 0, 0.8) 0%,
              rgba(0, 0, 0, 0) 60%
            );
            pointer-events: none;
            z-index: 1;
          }
        }

        :root {
          --gap: 10px;
          --base: clamp(
            3rem,
            10cqi,
            100px
          ); /* Slightly wider strips for better spacing */
          --easing: cubic-bezier(0.22, 1, 0.36, 1);
          --speed: 0.5s;
        }

        ul {
          display: grid;
          container-type: inline-size;
          /* 5 Columns for 5 Trainers */
          grid-template-columns: 10fr 1fr 1fr 1fr 1fr;
          gap: var(--gap);
          list-style-type: none;
          justify-content: center;
          padding: 0;
          height: clamp(400px, 50dvh, 600px); /* Taller for vertical photos */
          margin: 0;
          width: 1000px;
          max-width: calc(100% - 2rem);
          transition: grid-template-columns var(--speed) var(--easing);
        }

        li {
          background: #000; /* Black background behind images */
          position: relative;
          overflow: hidden;
          min-width: var(--base);
          border-radius: 12px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
          cursor: pointer;
        }
      }

      @layer base {
        :root {
          --font-size-min: 16;
          --font-size-max: 20;
          --font-ratio-min: 1.2;
          --font-ratio-max: 1.33;
          --font-width-min: 375;
          --font-width-max: 1500;
        }

        html {
          color-scheme: light dark;
        }

        [data-theme="light"] {
          color-scheme: light only;
        }

        [data-theme="dark"] {
          color-scheme: dark only;
        }

        :where(.fluid) {
          font-size: clamp(1.5rem, 4vw, 3rem);
        }

        *,
        *:after,
        *:before {
          box-sizing: border-box;
        }

        body {
          display: grid;
          place-items: center;
          min-height: 100vh;
          font-family: system-ui, -apple-system, sans-serif;
        }
      }
    </style>
  </head>
  <body>
    <h1 class="fluid">象棋大师训练营</h1>
    <p>
      传承国粹，以此为道。汇聚顶尖师资，为您提供最专业的象棋实战与理论指导。
    </p>

    <ul>
      <li data-active="true">
        <article>
          <h3>卢国龙</h3>
          <p>
            资深教练。专注于基础巩固与中局博弈，帮助学员建立稳固的棋理基础。
          </p>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M6 3h12l4 6-10 13L2 9Z" />
            <path d="M11 3 8 9l4 13 4-13-3-6" />
            <path d="M2 9h20" />
          </svg>
          <a href="#"><span>查看详情</span></a>
          <img src="https://picsum.photos/600/900?random=10" alt="Lu Guolong" />
        </article>
      </li>

      <li>
        <article>
          <h3>吴宗翰</h3>
          <p>
            特级大师。精通各种流行布局，擅长分析复杂局面，提升学员的大局观。
          </p>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <rect width="18" height="18" x="3" y="3" rx="2" />
            <path d="M12 3v18" />
            <path d="M3 12h18" />
          </svg>
          <a href="#"><span>查看详情</span></a>
          <img src="https://picsum.photos/600/900?random=20" alt="Wu Zonghan" />
        </article>
      </li>

      <li>
        <article>
          <h3>吴兰香</h3>
          <p>
            女子特级大师。巾帼不让须眉，以细腻的棋风著称，擅长残局处理与防守反击战术。
          </p>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="12" cy="8" r="5" />
            <path d="M3 21v-2a7 7 0 0 1 7-7h4a7 7 0 0 1 7 7v2" />
          </svg>
          <a href="#"><span>查看详情</span></a>
          <img
            src="https://picsum.photos/600/900?random=35"
            alt="Wu Lanxiang"
          />
        </article>
      </li>

      <li>
        <article>
          <h3>王绍祖</h3>
          <p>战术专家。课程生动有趣，专攻攻杀战术与精准计算能力的提升。</p>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
          </svg>
          <a href="#"><span>查看详情</span></a>
          <img
            src="https://picsum.photos/600/900?random=40"
            alt="Wang Shaozu"
          />
        </article>
      </li>

      <li>
        <article>
          <h3>欧木顺</h3>
          <p>布局大师。深入浅出讲解古谱与现代布局的演变，传承经典棋艺。</p>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
          </svg>
          <a href="#"><span>查看详情</span></a>
          <img src="https://picsum.photos/600/900?random=50" alt="Ou Mushun" />
        </article>
      </li>
    </ul>

    <script type="module">
      import { Pane } from "https://cdn.skypack.dev/tweakpane@4.0.4";

      // DEFAULT SET TO LIGHT MODE
      const config = {
        theme: "light",
      };

      const ctrl = new Pane({
        title: "设置 (Settings)",
        expanded: false,
      });

      const update = () => {
        document.documentElement.dataset.theme = config.theme;
      };

      const sync = (event) => {
        if (
          !document.startViewTransition ||
          event.target.controller.view.labelElement.innerText !== "Theme"
        )
          return update();
        document.startViewTransition(() => update());
      };

      ctrl.addBinding(config, "theme", {
        label: "Theme",
        options: {
          System: "system",
          Light: "light",
          Dark: "dark",
        },
      });

      ctrl.on("change", sync);
      update();

      const list = document.querySelector("ul");
      const items = list.querySelectorAll("li");

      const setIndex = (event) => {
        const closest = event.target.closest("li");
        if (closest) {
          const index = [...items].indexOf(closest);
          const cols = new Array(list.children.length)
            .fill()
            .map((_, i) => {
              items[i].dataset.active = (index === i).toString();
              return index === i ? "10fr" : "1fr";
            })
            .join(" ");
          list.style.setProperty("grid-template-columns", cols);
        }
      };

      list.addEventListener("focus", setIndex, true);
      list.addEventListener("click", setIndex);
      list.addEventListener("pointermove", setIndex);

      const resync = () => {
        const w = Math.max(
          ...[...items].map((i) => {
            return i.offsetWidth;
          })
        );
        list.style.setProperty("--article-width", w);
      };

      window.addEventListener("resize", resync);
      resync();
    </script>
  </body>
</html>
